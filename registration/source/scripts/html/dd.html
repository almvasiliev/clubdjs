<?php
function dd($delfile) //Функция удаления директорий и файлов.
        		{
					if (file_exists($delfile)) //Если файл или директория создана.
						{
							chmod($delfile,0777); //Выставляем парава доступа на файл или директорию 777 - полный доступ.
								
                                if (is_dir($delfile)) //Если директория.
									{
                                            $handle = opendir($delfile); //Открыть директорию.
                                            	while($filename = readdir($handle)) //Цикл чтения и записи все в переменную.
                                           			if ($filename != "." && $filename != "..") //В явном виде отменяем запись в переменную текущий и родительсткий каталоги, чтобы не потерять нужные данные.
                                            			{
                                                			dd($delfile."/".$filename); //Удаляем файлы в директории.
                                            			}
                                                closedir($handle); //Закрываем директорию.
                                                rmdir($delfile);  //Удаляем уже пустую директорию.
                                    }
							else //Если это все таки файл, а не директория.
								{
									unlink($delfile);//Удаляем файл.
								}
						}
				}
?>